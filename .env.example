# -------- General --------
APP_DATA_DIR=.tonie_storymaker

# -------- Audio / Export --------
# MP3 bitrate for output chapters
MP3_BITRATE=192k

# Chapter splitting target (characters). Lower = more, shorter MP3 files.
CHAPTER_MAX_CHARS=2500

# Chapter heading keywords (comma-separated).
# Defaults include: chapter (en), capitulo/capítulo (pt/es), chapitre (fr), kapitel (de),
# capitolo (it), hoofdstuk (nl), глава (ru), 章/章节 (ja/zh).
CHAPTER_SPLIT_KEYWORDS=chapter,capitulo,capítulo,chapitre,kapitel,capitolo,hoofdstuk,глава,章,章节

# Normalize output volume (simple gain in dB; negative is quieter).
# For "real" loudness normalization you can swap to ffmpeg loudnorm in code.
OUTPUT_GAIN_DB=-3.0

# Reduce long silences between sentences (milliseconds).
# Set SILENCE_MIN_LEN_MS=0 to disable.
SILENCE_MIN_LEN_MS=600
SILENCE_KEEP_MS=150
SILENCE_THRESH_DB=-40.0
SILENCE_FADE_MS=40

# -------- TTS / Voice cloning --------
# Coqui TTS model name. Default is XTTS v2.
TTS_MODEL=tts_models/multilingual/multi-dataset/xtts_v2

# Default language if not provided (e.g., en, fr, es)
DEFAULT_LANGUAGE=en

# Remove punctuation before sending to TTS to avoid reading symbols.
TTS_STRIP_PUNCTUATION=true

# Keep chunks below model limits (XTTS warns around ~200 chars for pt).
TTS_MAX_CHARS=200

# Merge small chunks into larger batches (0 to disable).
TTS_BATCH_MAX_CHARS=0

# Parallel workers for CPU-only synthesis. Keep at 1 when using GPU.
# Use 0 to auto-pick (CPU cores minus one).
TTS_WORKERS=1

# Enable GPU for TTS if a CUDA-enabled PyTorch build is installed.
TTS_USE_GPU=false

# -------- Tonies site automation (Playwright) --------
TONIES_BASE_URL=https://my.tonies.com/

# Storage state file for logged-in session (relative to APP_DATA_DIR)
PLAYWRIGHT_STORAGE_STATE=auth_state.json

# Headless browser (true/false)
PLAYWRIGHT_HEADLESS=false

# Duplicate handling: "skip" or "rename"
UPLOAD_ON_DUPLICATE=skip

# Suffix format if renaming duplicates
DUPLICATE_SUFFIX_FORMAT= ({n})

# Selectors (site can change; update if needed)
# These are "best guess" defaults. If the site layout differs for your account,
# you may need to tweak them.
SEL_NAV_CREATIVE_TONIES_TEXT=Creative Tonies
SEL_EDIT_CONTENT_TEXT=Edit Content
SEL_UPLOAD_AUDIO_TEXT=Upload Audio
SEL_TRACK_TITLE_LOCATOR=css=[data-testid="track-title"]
SEL_FILE_INPUT=css=input[type="file"]
